import { useEffect, useState } from "react";
import { useParams } from "react-router-dom";

const PendingPayment = () => {
    const { email, product } = useParams();
    const [countdown, setCountdown] = useState(15);

    const targetPath = "/get-quote/ecommerce/pending/" + product;

    useEffect(() => {
        const timer = setInterval(() => {
            setCountdown((prevCountdown) => prevCountdown - 1);
        }, 1000);

        return () => clearInterval(timer);
    }, []);

    useEffect(() => {
        if (countdown === 0) {
            window.location.href = targetPath;
        }
    }, [countdown, targetPath]);
    return (
        <div className="min-h-screen flex items-center justify-center bg-[#F7FFFF]">
            <div className="flex flex-col gap-6 items-center bg-white py-16 px-8 border border-[#EFF2F4]">
                <svg
                    width="50"
                    height="57"
                    viewBox="0 0 50 57"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                >
                    <path
                        d="M25 8.15625C20.1791 8.15625 15.4664 9.58582 11.458 12.2642C7.44954 14.9425 4.32533 18.7494 2.48045 23.2033C0.635561 27.6573 0.152855 32.5583 1.09337 37.2866C2.03388 42.0149 4.35538 46.3581 7.76428 49.767C11.1732 53.1759 15.5164 55.4974 20.2447 56.4379C24.973 57.3784 29.874 56.8957 34.3279 55.0508C38.7819 53.2059 42.5887 50.0817 45.2671 46.0733C47.9454 42.0648 49.375 37.3522 49.375 32.5312C49.3676 26.0689 46.7972 19.8733 42.2276 15.3037C37.658 10.7341 31.4624 8.16364 25 8.15625ZM25 52.8438C20.9826 52.8438 17.0554 51.6524 13.715 49.4205C10.3746 47.1885 7.77111 44.0161 6.23371 40.3045C4.6963 36.5929 4.29405 32.5087 5.07781 28.5685C5.86157 24.6282 7.79615 21.0089 10.6369 18.1681C13.4777 15.3274 17.097 13.3928 21.0372 12.609C24.9775 11.8253 29.0616 12.2275 32.7733 13.7649C36.4849 15.3024 39.6573 17.9059 41.8892 21.2462C44.1212 24.5866 45.3125 28.5138 45.3125 32.5312C45.3065 37.9166 43.1645 43.0797 39.3564 46.8877C35.5484 50.6957 30.3854 52.8377 25 52.8438ZM36.5934 20.9379C36.7822 21.1265 36.932 21.3506 37.0343 21.5972C37.1365 21.8437 37.1891 22.1081 37.1891 22.375C37.1891 22.6419 37.1365 22.9063 37.0343 23.1528C36.932 23.3994 36.7822 23.6235 36.5934 23.8121L26.4371 33.9684C26.2484 34.1571 26.0243 34.3068 25.7778 34.4089C25.5312 34.5111 25.2669 34.5636 25 34.5636C24.7331 34.5636 24.4688 34.5111 24.2222 34.4089C23.9757 34.3068 23.7516 34.1571 23.5629 33.9684C23.3742 33.7796 23.2245 33.5556 23.1223 33.309C23.0202 33.0624 22.9676 32.7981 22.9676 32.5312C22.9676 32.2644 23.0202 32.0001 23.1223 31.7535C23.2245 31.5069 23.3742 31.2829 23.5629 31.0941L33.7191 20.9379C33.9078 20.749 34.1318 20.5992 34.3784 20.497C34.625 20.3948 34.8893 20.3422 35.1563 20.3422C35.4232 20.3422 35.6875 20.3948 35.9341 20.497C36.1807 20.5992 36.4047 20.749 36.5934 20.9379ZM16.875 2.0625C16.875 1.52378 17.089 1.00712 17.4699 0.626189C17.8509 0.245256 18.3675 0.03125 18.9063 0.03125H31.0938C31.6325 0.03125 32.1491 0.245256 32.5301 0.626189C32.911 1.00712 33.125 1.52378 33.125 2.0625C33.125 2.60122 32.911 3.11788 32.5301 3.49881C32.1491 3.87974 31.6325 4.09375 31.0938 4.09375H18.9063C18.3675 4.09375 17.8509 3.87974 17.4699 3.49881C17.089 3.11788 16.875 2.60122 16.875 2.0625Z"
                        fill="#F5BC16"
                    />
                </svg>

                <p className="font-bold text-[27px] text-[#2D2727]">
                    Payment Pending
                </p>
                <p className="text-center text-[#585858]">
                    Thank you for completing your online transaction, you will
                    <br /> receive a confirmation message once your payment has
                    been <br /> processed.
                </p>
                <p className="text-[#303030] font-bold text-center">
                    Reference number is sent to <br /> {email}
                </p>
                <p className="text-[#585858]">
                    Redirecting in {countdown} seconds
                </p>
            </div>
        </div>
    );
};

export default PendingPayment;
